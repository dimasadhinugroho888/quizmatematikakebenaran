<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz Matematika Kebenaran</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(270deg, #00c6ff, #0072ff, #00c6ff);
    background-size: 600% 600%;
    animation: gradientBG 20s ease infinite;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem 1rem;
    color: #fff;
    user-select: none;
  }
  @keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }
  h1 {
    margin-bottom: 1rem;
    font-weight: 700;
    font-size: 2.5rem;
    text-shadow: 0 3px 10px rgba(0,0,0,0.3);
  }
  label, select, button {
    font-size: 1.2rem;
  }
  select, button {
    padding: 0.7rem 1.5rem;
    margin: 0.5rem 0 1.5rem 0;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    background: rgba(255 255 255 / 0.15);
    color: white;
    backdrop-filter: blur(10px);
  }
  select:hover, button:hover:not(:disabled) {
    background: rgba(255 255 255 / 0.4);
    box-shadow: 0 8px 30px rgba(0,123,255,0.6);
    color: #0046d5;
  }
  button:disabled {
    background: rgba(255 255 255 / 0.1);
    color: rgba(255 255 255 / 0.5);
    cursor: not-allowed;
    box-shadow: none;
  }
  .quiz-container {
    background: rgba(255 255 255 / 0.1);
    border-radius: 20px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.25);
    width: 100%;
    max-width: 480px;
    padding: 2rem 2.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    overflow: hidden;
  }
  .progress-text {
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 0.75rem;
    letter-spacing: 1.2px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  .timer {
    position: relative;
    width: 100%;
    height: 18px;
    background: rgba(255 255 255 / 0.25);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 2rem;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.2);
  }
  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #00ffa1, #00eaff);
    width: 100%;
    transition: width 1s linear;
    filter: drop-shadow(0 0 4px #00eaff);
  }
  .timer-text {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    font-weight: 700;
    font-size: 1rem;
    color: white;
    text-align: center;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
    user-select: none;
  }
  .question {
    font-size: 2.2rem;
    margin-bottom: 2rem;
    font-weight: 700;
    text-align: center;
    line-height: 1.3;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeSlideIn 0.5s forwards;
  }
  @keyframes fadeSlideIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .answers {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
    width: 100%;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeSlideIn 0.5s 0.3s forwards;
  }
  .answer-btn {
    flex: 1 1 45%;
    padding: 1.1rem 0;
    font-size: 1.3rem;
    border-radius: 15px;
    border: none;
    background: rgba(255 255 255 / 0.2);
    color: white;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 0 10px rgba(0, 255, 180, 0.5);
    position: relative;
    overflow: hidden;
    transition:
      background-color 0.3s ease,
      color 0.3s ease,
      transform 0.15s ease,
      box-shadow 0.3s ease;
  }
  .answer-btn:hover:not(:disabled) {
    background: rgba(255 255 255 / 0.4);
    box-shadow: 0 0 25px #00ffd0;
    transform: scale(1.05);
  }
  .answer-btn:active:not(:disabled) {
    transform: scale(0.95);
  }
  .answer-btn.disabled {
    pointer-events: none;
    opacity: 0.7;
  }
  .answer-btn.correct {
    background: #00ff94 !important;
    color: #004022 !important;
    box-shadow: 0 0 25px #00ff94 !important;
    animation: pulseGreen 1s infinite;
  }
  .answer-btn.wrong {
    background: #ff4d4d !important;
    color: #500000 !important;
    box-shadow: 0 0 25px #ff4d4d !important;
    animation: pulseRed 1s infinite;
  }
  @keyframes pulseGreen {
    0%, 100% { box-shadow: 0 0 15px #00ff94, 0 0 30px #00ff94; }
    50% { box-shadow: 0 0 25px #00ff94, 0 0 40px #00ff94; }
  }
  @keyframes pulseRed {
    0%, 100% { box-shadow: 0 0 15px #ff4d4d, 0 0 30px #ff4d4d; }
    50% { box-shadow: 0 0 25px #ff4d4d, 0 0 40px #ff4d4d; }
  }

  /* Ripple effect on button click */
  .answer-btn.ripple {
    position: relative;
    overflow: hidden;
  }
  .answer-btn.ripple:after {
    content: "";
    position: absolute;
    border-radius: 50%;
    width: 100px;
    height: 100px;
    background: rgba(255 255 255 / 0.3);
    animation: rippleEffect 0.6s linear;
    pointer-events: none;
    transform: scale(0);
    opacity: 0;
  }
  .answer-btn.ripple:active:after {
    animation: rippleEffect 0.6s linear forwards;
    opacity: 1;
  }
  @keyframes rippleEffect {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }
  .score {
    font-size: 2rem;
    text-align: center;
    margin-top: 2rem;
    color: #00ff94;
    font-weight: 800;
    text-shadow: 0 2px 6px #00ff94aa;
    opacity: 0;
    transform: scale(0.7);
    animation: bounceIn 0.8s forwards;
  }
  @keyframes bounceIn {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  .footer {
    margin-top: auto;
    font-size: 0.85rem;
    color: rgba(255 255 255 / 0.5);
    text-align: center;
    user-select: none;
  }
</style>
</head>
<body>
  <h1>Quiz Matematika Kebenaran</h1>

  <label for="quizType">Pilih Jenis Quiz:</label>
  <select id="quizType" aria-label="Pilih jenis quiz matematika">
    <option value="multiplication">Perkalian</option>
    <option value="division">Pembagian</option>
    <option value="mixed">Gabungan</option>
  </select>

  <button id="startBtn" aria-label="Mulai quiz">Mulai Quiz</button>

  <div class="quiz-container" style="display:none;" role="main" aria-live="polite">
    <div class="progress-text" id="progressText">Soal 1 dari 10</div>
    <div class="timer" aria-label="Timer soal">
      <div class="progress-bar" id="progressBar"></div>
      <div class="timer-text" id="timerText">Waktu: 30 detik</div>
    </div>
    <div class="question" id="question"></div>
    <div class="answers" id="answers"></div>
  </div>

  <div class="score" id="score" role="alert" aria-live="assertive" style="display:none;"></div>

  <div class="footer">© 2025 Tranletin Quiz by Dimas</div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const quizType = document.getElementById("quizType");
    const quizContainer = document.querySelector(".quiz-container");
    const questionEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const progressBar = document.getElementById("progressBar");
    const timerText = document.getElementById("timerText");
    const scoreEl = document.getElementById("score");
    const progressText = document.getElementById("progressText");

    let currentQuestion = 0;
    let score = 0;
    let questions = [];
    let timerId;
    let timeLeft = 30;
    const totalQuestions = 10;

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateMultiplication() {
      const a = getRandomInt(1, 10);
      const b = getRandomInt(1, 10);
      return { question: `${a} × ${b} = ?`, answer: a * b };
    }

    function generateDivision() {
      const b = getRandomInt(1, 10);
      const answer = getRandomInt(1, 10);
      const a = b * answer;
      return { question: `${a} ÷ ${b} = ?`, answer: answer };
    }

    function generateMixed() {
      return Math.random() < 0.5 ? generateMultiplication() : generateDivision();
    }

    function generateChoices(correct) {
      const choices = new Set();
      choices.add(correct);

      while (choices.size < 4) {
        let choice = correct + getRandomInt(-10, 10);
        if (choice > 0) choices.add(choice);
      }

      return Array.from(choices).sort(() => Math.random() - 0.5);
    }

    function startTimer() {
      timeLeft = 30;
      updateTimerUI();

      timerId = setInterval(() => {
        timeLeft--;
        updateTimerUI();

        if (timeLeft <= 0) {
          clearInterval(timerId);
          disableAnswers();
          showCorrectAnswer();
          setTimeout(nextQuestion, 1500);
        }
      }, 1000);
    }

    function updateTimerUI() {
      timerText.textContent = `Waktu: ${timeLeft} detik`;
      progressBar.style.width = (timeLeft / 30) * 100 + '%';

      if (timeLeft <= 10) {
        progressBar.style.background = '#ff4d4d';
      } else if (timeLeft <= 20) {
        progressBar.style.background = '#ffc107';
      } else {
        progressBar.style.background = 'linear-gradient(90deg, #00ffa1, #00eaff)';
      }
    }

    function disableAnswers() {
      Array.from(answersEl.children).forEach((btn) => {
        btn.classList.add("disabled");
        btn.disabled = true;
      });
    }

    function showCorrectAnswer() {
      Array.from(answersEl.children).forEach((btn) => {
        if (+btn.textContent === questions[currentQuestion].answer) {
          btn.classList.add("correct");
        }
      });
    }

    function createRipple(event) {
      const button = event.currentTarget;
      const circle = document.createElement("span");
      const diameter = Math.max(button.clientWidth, button.clientHeight);
      const radius = diameter / 2;
      circle.style.width = circle.style.height = diameter + "px";
      circle.style.left = event.clientX - button.getBoundingClientRect().left - radius + "px";
      circle.style.top = event.clientY - button.getBoundingClientRect().top - radius + "px";
      circle.classList.add("ripple-effect");
      const ripple = button.getElementsByClassName("ripple-effect")[0];
      if (ripple) ripple.remove();
      button.appendChild(circle);
    }

    function showQuestion() {
      clearInterval(timerId);
      if (currentQuestion >= questions.length) {
        endQuiz();
        return;
      }

      progressText.textContent = `Soal ${currentQuestion + 1} dari ${totalQuestions}`;
      const q = questions[currentQuestion];
      questionEl.style.opacity = 0;
      answersEl.style.opacity = 0;

      setTimeout(() => {
        questionEl.textContent = q.question;
        questionEl.style.opacity = 1;
        answersEl.innerHTML = "";

        const choices = generateChoices(q.answer);
        choices.forEach((choice) => {
          const btn = document.createElement("button");
          btn.textContent = choice;
          btn.classList.add("answer-btn", "ripple");
          btn.addEventListener("click", (e) => {
            createRipple(e);
            clearInterval(timerId);
            disableAnswers();

            if (choice === q.answer) {
              btn.classList.add("correct");
              score++;
            } else {
              btn.classList.add("wrong");
              showCorrectAnswer();
            }
            setTimeout(nextQuestion, 1500);
          });
          answersEl.appendChild(btn);
        });

        answersEl.style.opacity = 1;
        startTimer();
      }, 400);
    }

    function nextQuestion() {
      currentQuestion++;
      showQuestion();
    }

    function endQuiz() {
      quizContainer.style.display = "none";
      scoreEl.style.display = "block";
      scoreEl.textContent = `Quiz selesai! Skor kamu: ${score} dari ${totalQuestions}`;
      startBtn.style.display = "inline-block";
      quizType.disabled = false;
    }

    startBtn.addEventListener("click", () => {
      currentQuestion = 0;
      score = 0;
      scoreEl.style.display = "none";
      quizContainer.style.display = "flex";
      startBtn.style.display = "none";
      quizType.disabled = true;

      const type = quizType.value;
      questions = [];
      for (let i = 0; i < totalQuestions; i++) {
        if (type === "multiplication") {
          questions.push(generateMultiplication());
        } else if (type === "division") {
          questions.push(generateDivision());
        } else {
          questions.push(generateMixed());
        }
      }
      showQuestion();
    });
  </script>

  <style>
    /* Ripple effect styles */
    .ripple-effect {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      animation: ripple 0.6s linear;
      background: rgba(255, 255, 255, 0.5);
      pointer-events: none;
      z-index: 10;
    }
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
  </style>
</body>
</html>
